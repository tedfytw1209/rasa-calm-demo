version: "3.1"

intents:
  - target_trial_emulation
  - provide_evidence
  - ask_concept
  - ask_options

slots:
  user_intent:
    type: categorical
    values:
      - evidence
      - concept
      - options
    mappings:
        - type: from_llm
  concept_to_explain:
    type: text
    mappings:
      - type: from_llm
  component:
    type: text
    mappings:
      - type: from_llm
  options_list:
    type: text
    mappings:
      - type: from_llm
  option_search_finish:
    type: bool
    initial_value: false
    mappings:
      - type: from_llm
  tte_field:
    type: categorical
    values:
      - eligibility.Population
      - eligibility.InclusionCriteria_norm
      - eligibility.ExclusionCriteria_norm
      - eligibility.Computablephenotype
      - eligibility.Population Evaluation
      - treatment_strategies.TreatmentGroup
      - treatment_strategies.ClinicalDomain
      - treatment_strategies.DoseSchedule
      - treatment_strategies.DoseSchedule_norm
      - treatment_strategies.identify the exposure
      - treatment_strategies.definitions of vaccinated status
      - treatment_strategies.Context
      - treatment_strategies.ComparatorGroup
      - treatment_strategies.ComparatorDetails
      - treatment_strategies.ExposureValidation
      - treatment_strategies.GracePeriod
      - treatment_assignment.IndexDate_norm
      - treatment_assignment.Methods.Final
      - treatment_assignment.MatchingCaliper
      - treatment_assignment.PsVariables
      - treatment_assignment.ConfounderSelection
      - treatment_assignment.Observation Period
      - treatment_assignment.SmdAfterEmulation
      - treatment_assignment.SmdDetails
      - treatment_assignment.UnmeasuredConfounders
      - treatment_assignment.UnmeasuredConfounders Model
      - treatment_assignment.Timealignment.Final
      - outcomes.PrimaryOutcome
      - outcomes.outcomes definations
      - outcomes.Validation
      - outcomes.Codes
      - outcomes.CompetingRisks
      - outcomes.NegativeControls
      - outcomes.SecondaryOutcomes
      - outcomes.Secondary defination
      - outcomes.SafetyOutcomes
      - follow_up.Start
      - follow_up.lag time
      - follow_up.End
      - follow_up.CensoringRules
      - follow_up.TreatmentSwitching
      - follow_up.MedianTime
      - causal_contrasts.AnalysisApproach.Final
      - statistical_analysis.Models.Final
      - statistical_analysis.EffectMetrics.Final
      - statistical_analysis.SensitivityAnalyses
      - statistical_analysis.SubgroupAnalyses
      - statistical_analysis.SubgroupModel
      - statistical_analysis.MissingDataApproach
      - statistical_analysis.MissingDataApproachOther
      - statistical_analysis.Multiplicity
      - statistical_analysis.Software
    mappings:
      - type: from_llm
        llm_config:
          description: >
            TTE subcomponent key for options recommendation.
            Map the user's question to exactly ONE of the value.
            (return only the key string, nothing else)

responses:
  utter_options_list:
    - text: "Your current options of {tte_field} are:\n {options_list}"
  utter_cancel_qa:
    - text: QA has been cancelled.

  # ---- NEW ask responses for collect steps ----
  utter_ask_user_intent:
    - text: "What kind of help do you need? You can say: evidence, concept, or options."
  utter_ask_tte_field:
    - text: "Which component and field should I recommend options for?"
  utter_ask_concept_to_explain:
    - text: "Which concept or term from target trial emulation would you like me to explain or find examples for?"

actions:
  - action_options_search
