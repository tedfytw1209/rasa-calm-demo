version: "3.1"

intents:
  - target_trial_emulation_qa

entities:
  - pizza_type
  - department

slots:
  user_intent:
    type: categorical
    values:
      - pipeline
      - evidence
      - concept
      - options
    mappings:
        - type: from_llm
  current_component:
    type: categorical
    values:
      - objectives
      - eligibility
      - treatment_strategies
      - treatment_assignment
      - outcomes
      - follow_up
      - causal_contrasts
      - statistical_analysis
    mappings:
      - type: from_llm
  options_list:
    type: text
    mappings:
      - type: controlled
  eligibility_population:
    type: text
    mappings: 
      - type: from_llm
    description: "Eligibility.Population: define the target population."
  eligibility_inclusioncriteria:
    type: list
    mappings: 
      - type: from_llm
    description: "Eligibility.InclusionCriteria: list inclusion rules."
  eligibility_exclusioncriteria:
    type: list
    mappings: 
      - type: from_llm
    description: "Eligibility.ExclusionCriteria: list exclusion rules."
  eligibility_computablephenotype:
    type: text
    mappings: 
      - type: from_llm
    description: "Eligibility.ComputablePhenotype: algorithmic definition of the cohort."
  eligibility_population_evaluation:
    type: text
    mappings: 
      - type: from_llm
    description: "Eligibility.Population Evaluation: how the population definition is evaluated."
  # Pipeline completion flags
  eligibility_done:
    type: bool
    initial_value: false
    mappings:
      - type: custom
  objectives_done:
    type: bool
    initial_value: false
    mappings:
      - type: custom
  treatment_strategies_done:
    type: bool
    initial_value: false
    mappings:
      - type: custom
  treatment_assignment_done:
    type: bool
    initial_value: false
    mappings:
      - type: custom
  outcomes_done:
    type: bool
    initial_value: false
    mappings:
      - type: custom
  follow_up_done:
    type: bool
    initial_value: false
    mappings:
      - type: custom
  causal_contrasts_done:
    type: bool
    initial_value: false
    mappings:
      - type: custom
  statistical_analysis_done:
    type: bool
    initial_value: false
    mappings:
      - type: custom
  finish:
    type: bool
    initial_value: false
    mappings:
      - type: custom

responses:
  utter_options_list:
    - text: "Your current options of {current_component} are:\n {options_list}"
  utter_cancel_order:
    - text: QA has been cancelled.
  utter_component_ask:
    - text: "Which component would you like to work on next? Your options are: objectives, eligibility, treatment_strategies, treatment_assignment, outcomes, follow_up, causal_contrasts, statistical_analysis."

actions:
  - action_options_search
  - action_trigger_search
  - action_mark_component_done
  - action_check_finish_pipeline
  - action_export_protocol_json
